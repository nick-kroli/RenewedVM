# RenewedVM

## Step 1 - Parser

The first step will involve parsing a simple assembly language program for an artificial (virtual) machine. Statements in the language will be of the form: `opcode [operand [operand]]`. The opcode will specify what kind of statement is present, and there will be zero to two operands following it. Once the opcode is determined, the number and kind of operands will be known exactly. Thus parsing basically involves getting the first set of characters from the input line, recognizing what kind of statement it is, and then getting the required operands, i.e., very simple parsing.

## Step 2 - Virtual Machine

### Actions: Operations of Instructions Generated by Parser

#### OP_ENTER_SUBROUTINE opnd
Add a stack frame of size opnd to the data memory to hold the variables used by the subroutine. Increment the pc to cause the next statement in instruction memory to be executed next. This instruction is created by the parser from the gosublabel label statement.

#### OP_START_PROGRAM opnd
Set up storage in the data memory to hold the outer scope variables. The size of the stack frame is given by opnd. This is basically setting up the stack frame for the main procedure. This instruction is created by the parser from the start statement.

#### OP_EXIT
Exit the program, i.e., terminates execution.
This instruction was created by the parser from the exit statement.

#### OP_JUMP opnd
Set the pc to the address specified by opnd. This instruction is created by the parser from the jump label statement.

#### OP_JUMPZERO opnd
Remove the top element from the runtime stack. If it is zero, set the pc to the address specified by opnd, otherwise increment the pc to execute the next statement.
This instruction is created by the parser from the jumpzero label statement.

#### OP_GOSUB opnd
Make a subroutine call. The address of the next statement (pc+1) is stored into a runtime stack of return addresses. The pc is set to the value of opnd, which is the address of the subroutine. This instruction is created by the parser from the gosub label statement.

#### 
